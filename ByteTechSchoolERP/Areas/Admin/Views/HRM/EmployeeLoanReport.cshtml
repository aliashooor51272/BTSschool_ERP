@model ByteTechSchoolERP.DataAccess.ViewModels.EmployeeLoanViewModel

<div class="container d-flex justify-content-center" style="margin:6%;margin-left:12%">
    <div class="card" style="width: 100%; margin-left:12%; margin-top: 20px; padding: 20px;">
        <!-- Employee basic info section -->
        <div class="employee-info">
            <h2 class="text-center">Employee Details</h2>
            <p><strong>First Name:</strong> @Model.Employee.FirstName</p>
            <p><strong>Last Name:</strong> @Model.Employee.LastName</p>
            <p><strong>Email:</strong> @Model.Employee.Email</p>
            <p><strong>Phone:</strong> @Model.Employee.Phone</p>
            <!-- Add other employee fields as needed -->
        </div>

        <hr />

        <!-- Loan details section -->
        <div class="loan-info">
            <h3 class="text-center">Loan Details</h3>
            <table id="loanDetailsTable" class="table table-striped table-bordered text-center display nowrap" style="width:100%">
                <thead>
                    <tr>
                        <th>Loan Amount</th>
                        <th>Number of Installments</th>
                        <th>Remaining Amount</th>
                        <th>Paid Installments</th>
                        <th>Installment Amount</th>
                        <th>Remaining Installments</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var loan in Model.Loans)
                    {
                        var perInstallmentAmount = loan.LoanAmount / loan.NumberOfInstallments;
                        var remainingInstallments = loan.NumberOfInstallments - loan.PaidInstallments;
                        var remainingAmount = loan.LoanAmount - (loan.PaidInstallments * perInstallmentAmount);

                        <tr>
                            <td>@loan.LoanAmount.ToString("C")</td>
                            <td>@loan.NumberOfInstallments</td>
                            <td>@remainingAmount.ToString("C")</td>
                            <td>@loan.PaidInstallments</td>
                            <td>@loan.PerInstallmentAmount</td>
                            <td>@remainingInstallments</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

@section Scripts {
    <!-- Include jQuery and DataTables JS and CSS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.9/css/responsive.dataTables.min.css" />
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.9/js/dataTables.responsive.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            // Initialize DataTables with responsive functionality
            $('#loanDetailsTable').DataTable({
                "paging": true,
                "searching": true,
                "ordering": true,
                "info": true,
                "lengthChange": true,
                "responsive": true, // Enable responsiveness
                "autoWidth": false, // Disable automatic column width calculation
                "columnDefs": [
                    { "width": "20%", "targets": 0 },
                    { "width": "20%", "targets": 1 },
                    { "width": "20%", "targets": 2 },
                    { "width": "20%", "targets": 3 },
                    { "width": "20%", "targets": 4 },
                ]
            });
        });
    </script>
}
