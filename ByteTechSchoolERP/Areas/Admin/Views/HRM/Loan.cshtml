@model ByteTechSchoolERP.Models.ViewModels.LoanApplicationViewModel
@using Microsoft.AspNetCore.Mvc.Rendering

<style>
    /* Add these styles to center the form */
    .form-container {
        max-width: 800px; /* Adjust the max width as needed */
        margin: auto; /* Center horizontally */
        padding: 20px; /* Add some padding around the form */
        border: 1px solid #ccc; /* Optional: add border */
        border-radius: 8px; /* Optional: rounded corners */
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Optional: add shadow for depth */
        background-color: #fff; /* Optional: set background color */
    }

    .form-group {
        margin-top: -6px!important;
    }
</style>

<div class="page-wrapper">
    <div class="tab-container container-fluid mt-3">
        <div class="col-md-12">
            <div class="style-0" style="max-width: 100%; margin:0px;">
                <strong>HR Management</strong>
                <i class="fas fa-home home-icon"></i> - Loan Form
            </div>
        </div>
    </div>
    <div class="tab-container container-fluid d-md-flex">
        <div class="col-md-12 mt-4" id="classFormData">
            <div class="style-0" style="max-width:100%; margin:0px;" id="classFormData">
    <form asp-action="ApplyLoan" asp-controller="HRM" asp-area="Admin" method="post" id="loanApplicationForm">
        <div class="form-group">
           </div>

        <div class="form-group row">
            <div class="form-group col-md-4">
                            <label for="UserId" >Select User:</label>
                            <select id="UserId" name="UserId" asp-items="ViewBag.Users" class=" form-control"></select>
            </div>
           
            <div class="col-md-4">
                <label asp-for="LoanAmount">Loan Amount</label>
                <input asp-for="LoanAmount" type="number" class="form-control" required />
            </div>
            <div class="col-md-4">
                <label asp-for="NumberOfInstallments">Number of Installments</label>
                <input asp-for="NumberOfInstallments" class="form-control" required />
            </div>
            <div class="col-md-4">
                <label>Per Installment Amount</label>
                <input asp-for="PerInstallmentAmount" class="form-control" readonly />
            </div>
            <div class="form-group col-md-4">
                <label asp-for="DueDate">Due Date</label>
                <input asp-for="DueDate" type="date" class="form-control" required />
            </div>


        </div>

      

        <button type="submit" class="btn btn-primary">Save</button>
    </form>
    </div>
    </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('#loanApplicationForm').on('change', 'input[name="LoanAmount"], input[name="NumberOfInstallments"]', function () {
                const loanAmount = parseFloat($('input[name="LoanAmount"]').val()) || 0;
                const numberOfInstallments = parseInt($('input[name="NumberOfInstallments"]').val()) || 1; // Avoid division by zero
                const perInstallmentAmount = (loanAmount / numberOfInstallments).toFixed(2);
                $('input[name="PerInstallmentAmount"]').val(perInstallmentAmount);
            });
        });
    </script>
}
